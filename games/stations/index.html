<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ğŸ° ××©×™××ª ×¤×•×¨×™× â€” ×—×“×¨×™ ×”××ª×’×¨</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Frank+Ruhl+Libre:wght@400;700;900&family=Heebo:wght@300;400;700;900&display=swap');
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: 'Heebo', sans-serif;
      background: linear-gradient(180deg, #fef9ef, #fdf4ff);
      color: #1e1b4b; min-height: 100vh; padding: 20px;
    }
    .back-link {
      position: fixed; top: 12px; right: 12px;
      color: #7c3aed; text-decoration: none; font-size: 0.85rem;
      background: #fff; padding: 5px 12px; border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1); z-index: 100;
    }
    h1 { font-family: 'Frank Ruhl Libre', serif; text-align: center; font-size: 2rem; color: #7c3aed; margin: 10px 0 5px; }
    .subtitle { text-align: center; color: #6b7280; margin-bottom: 10px; }
    .color-tip {
      max-width: 600px; margin: 0 auto 25px;
      background: linear-gradient(135deg, #fef3c7, #fef9c3);
      border: 2px solid #fbbf24; border-radius: 16px;
      padding: 15px 20px; text-align: center;
    }
    .color-tip .icon { font-size: 2rem; }
    .color-tip h3 { color: #b45309; font-size: 1.1rem; margin: 5px 0; }
    .color-tip p { color: #92400e; font-size: 0.9rem; line-height: 1.6; }
    .rooms { max-width: 700px; margin: 0 auto; display: flex; flex-direction: column; gap: 14px; }
    .room-card {
      display: flex; align-items: center; gap: 15px;
      background: #fff; border: 2px solid #e9d5ff;
      border-radius: 16px; padding: 16px 20px;
      text-decoration: none; color: inherit;
      transition: all 0.3s; box-shadow: 0 2px 8px rgba(0,0,0,0.04);
    }
    .room-card:hover { transform: translateX(-5px); border-color: #c084fc; box-shadow: 0 6px 20px rgba(124,58,237,0.12); }
    .room-emoji { font-size: 2.5rem; min-width: 50px; text-align: center; }
    .room-info { flex: 1; }
    .room-title { font-family: 'Frank Ruhl Libre', serif; font-size: 1.2rem; color: #4c1d95; }
    .room-desc { font-size: 0.85rem; color: #6b7280; margin-top: 3px; }
    .room-color {
      display: inline-block; padding: 3px 10px;
      border-radius: 8px; font-size: 0.75rem; font-weight: 700;
      margin-top: 5px;
    }
    .room-arrow { font-size: 1.5rem; color: #c084fc; }

    /* â•â• Progress Tracker Float â•â• */
    .progress-toggle {
      position: fixed; bottom: 16px; left: 16px; z-index: 200;
      background: linear-gradient(135deg, #7c3aed, #6d28d9); color: #fff;
      border: none; border-radius: 14px; padding: 10px 18px;
      font-family: 'Heebo', sans-serif; font-size: 0.95rem; font-weight: 700;
      cursor: pointer; box-shadow: 0 4px 18px rgba(124,58,237,0.35);
      transition: all 0.3s; display: flex; align-items: center; gap: 8px;
    }
    .progress-toggle:hover { transform: translateY(-2px); box-shadow: 0 6px 24px rgba(124,58,237,0.5); }
    .progress-toggle .badge {
      background: #fbbf24; color: #1e1b4b; border-radius: 50%; width: 22px; height: 22px;
      display: flex; align-items: center; justify-content: center; font-size: 0.7rem; font-weight: 900;
    }

    .progress-panel {
      position: fixed; bottom: 70px; left: 16px; z-index: 200;
      background: #fff; border: 2px solid #e9d5ff; border-radius: 20px;
      box-shadow: 0 10px 40px rgba(0,0,0,0.15);
      padding: 20px; max-width: 95vw; max-height: 70vh; overflow: auto;
      transform: scale(0); transform-origin: bottom left;
      transition: transform 0.3s cubic-bezier(0.34,1.56,0.64,1);
    }
    .progress-panel.open { transform: scale(1); }

    .progress-panel h3 {
      font-family: 'Frank Ruhl Libre', serif; color: #4c1d95;
      font-size: 1.2rem; margin-bottom: 12px; text-align: center;
    }
    .progress-table {
      width: 100%; border-collapse: collapse; font-size: 0.8rem; direction: rtl;
    }
    .progress-table th {
      background: #f3e8ff; color: #4c1d95; padding: 6px 4px;
      font-weight: 700; border: 1px solid #e9d5ff; white-space: nowrap;
    }
    .progress-table td {
      text-align: center; padding: 6px 4px; border: 1px solid #f0e6ff;
    }
    .progress-table tr:nth-child(even) { background: #faf5ff; }
    .progress-table .group-name {
      font-weight: 700; color: #7c3aed; background: #f3e8ff; white-space: nowrap; padding: 6px 10px;
    }
    .progress-table .done { font-size: 1.1rem; }
    .progress-table .total-cell {
      font-weight: 900; color: #7c3aed; background: #f3e8ff;
    }
    .progress-empty {
      text-align: center; color: #9ca3af; padding: 30px; font-size: 0.95rem;
    }
    .progress-empty .icon { font-size: 2.5rem; margin-bottom: 10px; }

    @media (max-width: 600px) {
      .progress-panel { left: 8px; right: 8px; bottom: 65px; max-width: none; }
      .progress-table { font-size: 0.7rem; }
    }
  </style>
</head>
<body>
<a href="../../index.html" class="back-link">â†’ ×—×–×¨×”</a>
<h1>ğŸ° ××©×™××ª ×¤×•×¨×™×</h1>
<p class="subtitle">×—×“×¨×™ ××ª×’×¨ ××”××’×™×œ×” â€” ×œ×©×—×§ ×‘×‘×™×ª!</p>

<div class="color-tip">
  <div class="icon">ğŸ¨</div>
  <h3>×”×›× ×” ×œ×¤× ×™ ×”××©×—×§!</h3>
  <p>
    ×›×œ ×—×“×¨ ××ª×—×™×œ ×‘×©×œ×‘ ×¦×‘×¢.<br>
    <strong>×§×—×• ×“×£ ×œ×‘×Ÿ, ×¦×‘×¢×• ××•×ª×• ×‘×¦×‘×¢ ×”××ª××™×</strong> (×›×ª×•×‘ ×œ×™×“ ×›×œ ×—×“×¨)<br>
    ×•××– ×”×¨×™××• ××ª ×”×“×£ ×œ××¦×œ××” ×›×“×™ ×œ×”×™×›× ×¡! ğŸ“·
  </p>
</div>

<div class="rooms">
  <a href="station-1-flashlight.html" class="room-card">
    <span class="room-emoji">ğŸ”¦</span>
    <div class="room-info">
      <div class="room-title">×—×“×¨ ×”×¡× ×¤×™×¨</div>
      <div class="room-desc">××¦××• ××™×œ×™× × ×¡×ª×¨×•×ª ×‘×—×•×©×š ×¢× ×¤× ×¡!</div>
      <span class="room-color" style="background:#fee2e2; color:#991b1b;">ğŸ”´ ×¦×‘×¢×• ×‘×¦×‘×¢ ××“×•×</span>
    </div>
    <span class="room-arrow">â†</span>
  </a>

  <a href="station-3-scratch.html" class="room-card">
    <span class="room-emoji">ğŸ«</span>
    <div class="room-info">
      <div class="room-title">×—×“×¨ ×”×’×™×¨×•×“</div>
      <div class="room-desc">×’×¨×“×• ××ª ×”×›×¨×˜×™×¡×™× ×•×’×œ×• ×¡×•×“×•×ª!</div>
      <span class="room-color" style="background:#dbeafe; color:#1e40af;">ğŸ”µ ×¦×‘×¢×• ×‘×¦×‘×¢ ×›×—×•×œ</span>
    </div>
    <span class="room-arrow">â†</span>
  </a>

  <a href="station-4-letters.html" class="room-card">
    <span class="room-emoji">ğŸ”¤</span>
    <div class="room-info">
      <div class="room-title">×—×“×¨ ×”××•×ª×™×•×ª</div>
      <div class="room-desc">×¤×¢× ×—×• ××ª ×”×¦×•×¤×Ÿ ×”×¡×•×“×™!</div>
      <span class="room-color" style="background:#dcfce7; color:#166534;">ğŸŸ¢ ×¦×‘×¢×• ×‘×¦×‘×¢ ×™×¨×•×§</span>
    </div>
    <span class="room-arrow">â†</span>
  </a>

  <a href="station-5-haman.html" class="room-card">
    <span class="room-emoji">ğŸ”¨</span>
    <div class="room-info">
      <div class="room-title">×”×›×• ×‘×”××Ÿ!</div>
      <div class="room-desc">×¦×¢×§×• ×—×–×§ â€” ××©×—×§ ×§×•×œ ××˜×•×¨×£!</div>
      <span class="room-color" style="background:#fef9c3; color:#854d0e;">ğŸŸ¡ ×¦×‘×¢×• ×‘×¦×‘×¢ ×¦×”×•×‘</span>
    </div>
    <span class="room-arrow">â†</span>
  </a>

  <a href="station-6-temperature.html" class="room-card">
    <span class="room-emoji">ğŸŒ¡ï¸</span>
    <div class="room-info">
      <div class="room-title">×—×“×¨ ×”×˜××¤×¨×˜×•×¨×”</div>
      <div class="room-desc">×—× ××• ×§×¨? ×’×œ×• ××ª ×”×¤×¡×•×§ ×”× ×¡×ª×¨!</div>
      <span class="room-color" style="background:#ffedd5; color:#9a3412;">ğŸŸ  ×¦×‘×¢×• ×‘×¦×‘×¢ ×›×ª×•×</span>
    </div>
    <span class="room-arrow">â†</span>
  </a>
</div>

<!-- â•â• Progress Tracker â•â• -->
<button class="progress-toggle" id="progressToggle" onclick="toggleProgress()">
  ğŸ“Š ×”×ª×§×“××•×ª
  <span class="badge" id="progressBadge">0</span>
</button>

<div class="progress-panel" id="progressPanel">
  <h3>ğŸ“Š ×”×ª×§×“××•×ª ×”×§×‘×•×¦×•×ª</h3>
  <div id="progressContent"></div>
</div>

<script>
  const STATIONS = [
    { id: 1, emoji: 'ğŸ”¦', name: '×¡× ×¤×™×¨' },
    { id: 3, emoji: 'ğŸ«', name: '×’×™×¨×•×“' },
    { id: 4, emoji: 'ğŸ”¤', name: '××•×ª×™×•×ª' },
    { id: 5, emoji: 'ğŸ”¨', name: '×”××Ÿ' },
    { id: 6, emoji: 'ğŸŒ¡ï¸', name: '×˜××¤×¨×˜×•×¨×”' },
  ];

  let panelOpen = false;

  function toggleProgress() {
    panelOpen = !panelOpen;
    document.getElementById('progressPanel').classList.toggle('open', panelOpen);
    if (panelOpen) renderProgress();
  }

  function renderProgress() {
    const data = JSON.parse(localStorage.getItem('purim_progress') || '{}');
    const content = document.getElementById('progressContent');

    // Find groups that have any data
    const activeGroups = Object.keys(data).filter(g => data[g] && data[g].length > 0).sort((a,b) => +a - +b);

    if (activeGroups.length === 0) {
      content.innerHTML = `
        <div class="progress-empty">
          <div class="icon">ğŸ</div>
          <div>×¢×“×™×™×Ÿ ××™×Ÿ ×”×ª×§×“××•×ª<br>×©×œ×—×• ××ª ×”×§×‘×•×¦×•×ª ×œ×—×“×¨×™×!</div>
        </div>`;
      document.getElementById('progressBadge').textContent = '0';
      return;
    }

    let totalComplete = 0;
    let html = '<table class="progress-table"><thead><tr><th>×§×‘×•×¦×”</th>';
    STATIONS.forEach(s => { html += `<th>${s.emoji}<br>${s.name}</th>`; });
    html += '<th>×¡×”×´×›</th></tr></thead><tbody>';

    activeGroups.forEach(g => {
      const completed = data[g] || [];
      const count = completed.length;
      totalComplete += count;
      html += `<tr><td class="group-name">ğŸ‘¥ ${g}</td>`;
      STATIONS.forEach(s => {
        const done = completed.includes(s.id);
        html += `<td class="done">${done ? 'âœ…' : 'â¬œ'}</td>`;
      });
      html += `<td class="total-cell">${count}/${STATIONS.length}</td></tr>`;
    });

    html += '</tbody></table>';
    content.innerHTML = html;
    document.getElementById('progressBadge').textContent = totalComplete;
  }

  // Auto-refresh every 5 seconds when panel is open
  setInterval(() => { if (panelOpen) renderProgress(); }, 5000);

  // Initial badge count
  (function() {
    const data = JSON.parse(localStorage.getItem('purim_progress') || '{}');
    let total = 0;
    Object.values(data).forEach(arr => { if (Array.isArray(arr)) total += arr.length; });
    document.getElementById('progressBadge').textContent = total;
  })();
</script>
</body>
</html>
